{% extends "main.html" %}
    {% block scripts %}
    <script type="text/javascript">
        $(function () {
            $(".rank-link").click(function(e) {
                var dataId = $(this).attr('data-id');
                var id = $(this).attr('id');
                if (dataId == id + "-up") {
                    id = id + "-down";
                    $("a[data-id=" + id + "]").attr("class", "rank-link not-active");
                }
                if (dataId == id + "-down") {
                    id = id + "-up";
                    $("a[data-id=" + id + "]").attr("class", "rank-link not-active");
                }
                $(this).toggleClass('not-active active');
                $.ajax({
                 type: "PUT",
                 url: $(this).attr('href')
                });
                return false;
            });
        });
    </script>
    {% endblock %}
    {% block body %}
        {% for post in posts %}
            <div class="pure-g" id="{{ post.pk }}">
                <div class="pure-u-3-8 title-information">
                    <div class="pure-g">
                       <div class="pure-u-1-1 title">
                           {{ post.title }}
                       </div>
                       <div class="pure-u-1-1 date">
                           {{ post.date }}
                       </div>
                       <div class="pure-u-1-1 rank">
                           <a href="/rank/{{ post.pk }}/1/" data-id="{{ post.pk }}-up" id="{{ post.pk }}" class="rank-link {{ post.up_active }}">▲</a>
                       </div>
                       <div class="pure-u-1-1 rank">
                           <a href="/rank/{{ post.pk }}/-1/" data-id="{{ post.pk }}-down" id="{{ post.pk }}" class="rank-link {{ post.down_active }}">▼</a>
                       </div>
                    </div>
                </div>
                <div class="pure-u-5-8 content">
                    {{ post.content }}
                </div>
                <div class="pure-u-1-1 post-actions">
                    <a href="/">delete</a> <a href="/">edit</a> <a href="/">rank</a>
                </div>
            </div>
        {% endfor %}
{% endblock %}